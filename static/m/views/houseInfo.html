<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">
	<meta name="format-detection" content="telephone=no, email=no" />
	<title>详情信息</title>
	<link type="text/css" rel="stylesheet" href="../css/reset.css"/>
</head>
<body>
<div class="container" id="houseInfo"></div>

<script type="text/javascript" src="../js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../js/login.js"></script>
<script>
	// 获取地址栏的参数数组
	function getUrlParams()
	{
		var search = window.location.search ;
		// 写入数据字典
		var tmparray = search.substr(1,search.length).split("&");
		var paramsArray = new Array;
		if( tmparray != null)
		{
			for(var i = 0;i<tmparray.length;i++)
			{
				var reg = /[=|^==]/;    // 用=进行拆分，但不包括==
				var set1 = tmparray[i].replace(reg,'&');
				var tmpStr2 = set1.split('&');
				var array = new Array ;
				array[tmpStr2[0]] = tmpStr2[1] ;
				paramsArray.push(array);
			}
		}
		// 将参数数组进行返回
		return paramsArray ;
	}
	// 根据参数名称获取参数值
	function getParamValue(name)
	{
		var paramsArray = getUrlParams();
		if(paramsArray != null)
		{
			for(var i = 0 ; i < paramsArray.length ; i ++ )
			{
				for(var  j in paramsArray[i] )
				{
					if( j == name )
					{
						return paramsArray[i][j] ;
					}
				}
			}
		}
		return null ;
	}
	var houseId = getParamValue("house");
	var id=getParamValue("id");
	var userid=getParamValue("userid");
	console.log(id);

	$(function(){
		$.get(http+"/app/"+id+"/detail/",function(result){
			console.log(result);
			data5(result.objects[0]);
			console.log($(".test_start").html());

		});

		$.ajax({
			type:"get",
			url:http+"/app/houseinfo/",
			data:{
				house:houseId,
				userid:userid
			},
			success:function(data){
				console.log(data);
				if(data.response_state==200){
					houseInfo(data.objects[0]);
					$(".houseID").html(houseId);
					$(".userId").html(userid);
					$(".idd").html(id);


				}else{
					alert(data.msg);
				}
			},
			error:function(){
				alert("页面错误,请重试！");
			}

		});



	});

	/*收藏按钮*/
	function shareBtn(){
		$.ajax({
			type:"POST",
			url:http+"/app/addfollow/",
			data:{
				house:houseId,
				userid:userid
			},
			success:function(data){
				if(data.response_state==200){
					$(".shareBt").html("已收藏").css({background:"#999",border:"none",color:"#fff"});
					$(".shareBt").unbind("click");
				}else{
					alert(data.msg);
				}


			},
			error:function(){
				alert('出错了，请重试！');
			}
		})
	}
	function backList(){
		window.location.href="houseList.html?id="+id+"&userid="+userid;
	}
</script>

</body>
</html>
